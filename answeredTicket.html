<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>answeredTicket</title>
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/boxicons.css">
    <link rel="stylesheet" href="css/boxicons.min.css">

    <style>
        .priority-high {
            background-color: rgb(248, 150, 150) !important;
            color: red;
        }

        .priority-medium {
            background-color: rgb(249, 249, 158) !important;
            color: yellow;
        }

        .priority-low {
            background-color: rgb(150, 227, 156) !important;
            color: #004a80;
        }
    </style>
    <style>
        .status-open {
            background-color: rgb(248, 150, 150) !important;
            color: red;
        }

        .status-closed {
            background-color: rgb(150, 227, 156) !important;
            color: #004a80;
        }

        .status-answered {
            background-color: rgb(249, 249, 158) !important;
            color: yellow;
        }

        .status-new {
            background-color: rgb(209, 126, 37) !important;
            color: #004a80;
        }
    </style>
    <!--my fonts-->
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

    <link rel="stylesheet" href="mystyle.css">
    <link rel="stylesheet" href="styles.css">
    <!-- add font-awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet">

    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="/js/url.js"></script>
    <script src="js/helpdesk_cc.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>

    <script>
        window.onload = function () {
            if (localStorage.getItem("token") == null) {
                window.location.href = window.location.protocol + "//" + window.location.host + "/customerCare_login.html";

            } else {
                getUserInfo();
            }
        }
    </script>

    <script>
        var selectedValue;

        $(document).ready(function () {
            $("#filter").change(function () {
                var selectedText = $(this).find("option:selected").text();
                var selectedValue = $(this).val();

                loadFilterType(selectedValue);



            });
        });


        var tableName = "#answeredTickets tr";

        $(document).ready(function () {
            $('#datefilterfrom').change(function () {
                filterRows(tableName);
            });
            $('#datefilterto').change(function () {
                filterRows(tableName);
            });
            // $('#datefilterfrom').on("change", filterRows);
            // $('#datefilterto').on("change", filterRows);
        });

    </script>
</head>

<body>
    <!-- <nav class="top_navbar"> -->
    <!-- <div class="logo">
            <img class="logo-in" align="left" src="..\images\logo-in.png" alt="Stores for Everyone" />
        </div> -->
    <!-- <div class="username">
            <span> Hello, <span id="profile_name"></span> !</span>

            <basic><a class="header_right" onclick="logout()"><i class='bx bxs-exit'></i></a></basic>
            <span class="text-on-hover" id="loghover" style="display: none;">Logout</span> -->
    <!-- <a class="header_right" href="profile.html"><i class='bx bxs-user-circle'></i></a> -->
    <!-- </div>
    </nav> -->

    <div class="hero">
        <nav class="top_navbar" style="background-color:white;">
            <div class="bell-icon" style="margin-left: 94%;">
                <a>
                    <i class="fa-solid fa-bell" onclick="changeIcon(this)"></i>
                </a>

            </div>
            <div class="user">
                <span> Hello,Abhigyan!</span>
            </div>

            <img src="image/profile.png" class="user-pic" onclick="toggleMenu()">
            <div class="sub-menu-wrap" id="subMenu">
                <div class="sub-menu" style="margin-left:86%;">
                    <div class="user-info">
                        <img src="image/profile.png">
                        <h2>Abigyan Mishra</h2>
                    </div>
                    <hr>
                    <a href="#" class="sub-menu-link">
                        <img src="image/editprofile.jpg">
                        <p>Edit Profile</p>
                        <span>></span>
                    </a>
                    <a href="#" class="sub-menu-link">
                        <img src="image/settings.png">
                        <p>Settings</p>
                        <span>></span>
                    </a>
                    <a href="#" class="sub-menu-link">
                        <img src="image/logout.png">
                        <p>Logout</p>
                        <span>></span>
                    </a>

                </div>
            </div>
        </nav>
    </div>

    <header>
        <div class="container-fluid">
            <div class="row justify-content-center">
                <div class="loginn">
                    <div id="orders">
                        <div class="row">
                            <h1><b>Welcome to Customer Care Services</b></h1>
                        </div>
                    </div>
                </div>
            </div>
    </header>

    <div class="main-cards">

        <div class="card">
            <div class="card-inner">
                <p class="text-primary">New_Tickets</p>
                <span class="material-icons-outlined text-blue">inventory_2</span>
            </div>
            <span class="text-primary font-weight-bold">249</span>
        </div>

        <div class="card">
            <div class="card-inner">
                <p class="text-primary">Open_Tickets</p>
                <span class="material-icons-outlined text-orange">add_shopping_cart</span>
            </div>
            <span class="text-primary font-weight-bold">83</span>
        </div>

        <div class="card">
            <div class="card-inner">
                <p class="text-primary">Answered_Tickets</p>
                <span class="material-icons-outlined text-green">shopping_cart</span>
            </div>
            <span class="text-primary font-weight-bold">79</span>
        </div>

        <div class="card">
            <div class="card-inner">
                <p class="text-primary">Closed_Tickets</p>
                <span class="material-icons-outlined text-red">notification_important</span>
            </div>
            <span class="text-primary font-weight-bold">56</span>
        </div>

    </div>

    <div class="row">
        <div class="col-md-4">
            <span class="dropbtn">Filter :</span>
            <select required name="Type" id="filter" class="form-select" required>
                <option selected disabled hidden value="">Select</option>
                <option value="filterByDate">Filter By Date</option>
                <option value="filterByName">Filter By Name</option>
                <option value="filterByTicketNumber">Filter By Ticket Number</option>
                <option value="filterByPriority">Filter By Priority</option>
                <option value="filterByDepartment">Filter By Department</option>
            </select>
        </div>
        <br>
        <div id="rowDate" style="display:none;">From
            <input type="date" id="datefilterfrom" data-date-split-input="true"> To <input type="date" id="datefilterto"
                data-date-split-input="true">
        </div>
        <input type="text" id="name" onkeyup="myFunction(1,'name', 'answeredTickets')" placeholder="Search for names.."
            title="Type in a name" style="display:none;">
        <input type="text" id="Department" onkeyup="myFunction(3,'Department', 'answeredTickets')"
            placeholder="Search for Department" title="Type in a name" style="display:none;">
        <input type="text" id="Priority" onkeyup="myFunction(6,'Priority', 'answeredTickets')"
            placeholder="Search for Priority" title="Type in a name" style="display:none;">

        <input type="text" id="ticketNumber" onkeyup="myFunction(0,'ticketNumber', 'answeredTickets')"
            placeholder="Search for ticketNumber" title="Type in a name" style="display:none;">
        <br>
    </div>


    <!-- <nav class="navigation">
            <div class="first">
                <a href="index.html"><span class="all_tickets ">Dashboard </span></a>
                <a href="newTicket.html"><span class="new_tickets"> New Tickets </span></a>
                <a href="openTicket.html"><span class="open_tickets">Open Tickets </span></a>
                <a href="answeredTicket.html" id="current"><span class="answered_tickets">Answered Tickets </span></a>
                <a href="closedTicket.html"><span class="closed_tickets">Closed Tickets </span></a>
            </div>
        </nav> -->


    <center>
        <div class="sort">
            <button id="ansbtn1" onclick="getAnsweredTickets(),myFunction(1)">All Answered tickets</button>
            <button id="ansbtn2" class="mystyle1" onclick="getAgentAnsweredTickets(),myFunction(-1)">My Answered
                Tickets</button>
            <!-- <input class="filter" type="text" placeholder="Filter By Name" id="productname">
        <button class="filter">High Priority</button>
        <button class="filter">Normal Priority</button>
        <button class="filter">Low Priority</button> -->
        </div>
    </center>
    <div class="board">
        <table width="100%">
            <thead>
                <tr class="rem1 odd" id="answerHead" style="background-color:  #004a80;color: whitesmoke;">
                    <th>Ticket Number </th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Department</th>
                    <!-- <th>Type</th> -->
                    <th>Subject</th>
                    <th>Status</th>
                    <th>Priority</th>
                    <th>Ticket Date</th>
                    <th>Replied On</th>
                    <th>Assigned To</th>
                </tr>

            <tbody id="answeredTickets">

                </tr>
            </tbody>


            </thead>
        </table>
    </div>
    <footer>
        <div class="index-credits">
            <span class="left">&copy;2021 - A2ZSolutions LLC </span>
            <span class="right"><a href="#">Supported By Infinity Ventures (India) Pvt Ltd.</a></span>
        </div>
    </footer>
    <script>
        const icn = document.querySelector("basic");
        const text = document.querySelector("#loghover");

        icn.addEventListener("mouseenter", () => {
            text.style.display = "inline"
        })

        icn.addEventListener("mouseleave", () => {
            text.style.display = "none"
        })

    </script>
    <!-- to toggle user icon  -->
    <script>
        let sub_menu_wrap = document.querySelector(".sub-menu-wrap");
        let btn = document.querySelector(".user-pic");
        const toggleMenu = () =>
            sub_menu_wrap.classList.toggle("open-menu");

        window.addEventListener("click", function (e) {
            if (!btn.contains(e.target)) sub_menu_wrap.classList.remove("open-menu")
        });

        let changeIcon = function (icon) {
            icon.classList.toggle("fa-times")
        }

    </script>
    <script>
        function getAgentAnsweredTickets() {
            var agent = localStorage.getItem("agentname");
            getAnsweredTicketsOfAgent(agent);
        }
        window.addEventListener('load', (event) => {

            getAgentAnsweredTickets();

        })
        function myFunction(str) {

            var element = document.getElementById("ansbtn1");
            var element1 = document.getElementById("ansbtn2");

            if (str == 1) {

                element1.classList.remove("mystyle1");
                element.classList.toggle("mystyle");

            } else {

                element1.classList.toggle("mystyle1");
                element.classList.remove("mystyle");

            }

        }
    </script>
</body>

</html>